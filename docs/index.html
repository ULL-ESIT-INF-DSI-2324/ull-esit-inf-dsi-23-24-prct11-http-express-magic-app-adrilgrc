<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>practica09</title><meta name="description" content="Documentation for practica09"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">practica09</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>practica09</h2></div><div class="tsd-panel tsd-typography"><p><a href="https://classroom.github.com/a/7bX30zK4"><img src="https://classroom.github.com/assets/deadline-readme-button-24ddc0f5d75046c5622901739e7c5dd533143b0c8e959d652212380cedb1ea36.svg" alt="Review Assignment Due Date"></a></p>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-adrilgrc?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-adrilgrc/badge.svg?branch=main" alt="Coverage Status"></a></p>
<p><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-adrilgrc"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-adrilgrc&metric=alert_status" alt="Quality Gate Status"></a></p>
<a id="md:práctica-10-sistema-gestor-de-cartas-magic-con-sockets" class="tsd-anchor"></a><h1><a href="#md:práctica-10-sistema-gestor-de-cartas-magic-con-sockets">Práctica 10: Sistema Gestor de Cartas Magic con Sockets</a></h1><p>En ésta práctica se propone entre otras cosas adaptar el sistema gestor de cartas Magic implementado en la práctica 9 para que pueda ser utilizado en una estructura cliente-servidor. Para ello se utilizarán sockets y se implementará un servidor que permita a los clientes conectarse y realizar operaciones sobre la base de datos de ficheros de cartas.</p>
<a id="md:introducción" class="tsd-anchor"></a><h2><a href="#md:introducción">Introducción</a></h2><p>En ésta práctica se plantean una serie de ejercicios que ayudan a profundizar y entender los conceptos del trato de ficheros con la API síncrona FS que proporciona Node. Además de las herramientas utilizadas en las prácticas individuales, se en ésta el manejo de la herramienta relativa a la calidad de código SonarCloud.</p>
<a id="md:desarrollo" class="tsd-anchor"></a><h2><a href="#md:desarrollo">Desarrollo</a></h2><a id="md:ejercicio-1-implementación-de-los-sockets" class="tsd-anchor"></a><h3><a href="#md:ejercicio-1-implementación-de-los-sockets">Ejercicio 1: Implementación de los sockets</a></h3><p>Para la implementación de los sockets se ha creado una clase <code>ManagerServer</code> que hereda de <code>EventEmiiter</code> y que se encarga de gestionar las conexiones de los clientes. En el constructor de la clase se crea un servidor que escucha en el puerto 60300 y se añade un listener para el evento &#39;data&#39; que se encarga de gestionar las peticiones de los clientes.</p>
<p>Es importante destacar que, como el enunciado nos pedía no hacer uso del evento &#39;end&#39; para conocer cuándo se ha terminado de enviar la información segmentada, se ha optado por incluir un separador de salto de línea, para que así el servidor pudiera mandar su request.</p>
<p>Tenemos un fichero <code>server.ts</code> que se encarga de crear una instancia de la clase ManagerServer y de iniciar el servidor. A su vez, éste fichero se encarga de gestionar las peticiones de los clientes (haciendo de intermediario entre el cliente y la App desarrollada en la práctica anterior).</p>
<p>Para gestionarlo, desglosa el contenido de la descripción y, en base al comando <code>command</code> recibido, ejecuta la acción correspondiente. Para ello, se ha hecho uso de un switch que evalúa el comando recibido y ejecuta la acción correspondiente.</p>
<p>También cabe mencionar que métodos de la clase <code>App</code> han sido modificados para que sean utilizados por la API asíncrona basada en callbacks de <code>fs</code>. Para ello, se ha seguido el patrón de diseño Callback.</p>
<a id="md:modificación-1-uso-del-patrón-callback-con-la-api-asíncrona-de-fs" class="tsd-anchor"></a><h3><a href="#md:modificación-1-uso-del-patrón-callback-con-la-api-asíncrona-de-fs">Modificación 1: Uso del patrón Callback con la API asíncrona de fs</a></h3><p>Para la modificación 1 se ha modificado la clase <code>App</code> para que haga uso de la API asíncrona de fs. Para ello, se han modificado los métodos <code>readFile</code> y <code>writeFile</code> para que hagan uso de la API asíncrona de fs y se les ha añadido un callback que se ejecuta una vez se ha terminado de leer o escribir el fichero. Además, hay casos como el del método para revisar el contenido de un fichero, que se ha tenido que modificar para que haga uso de la API asíncrona de fs al método <code>access</code>.</p>
<p>En éste caso, sí que se han podido utilizar los test, ya que no se quedan colgados y se pueden ejecutar correctamente.</p>
<a id="md:conclusiones" class="tsd-anchor"></a><h2><a href="#md:conclusiones">Conclusiones</a></h2><p>En ésta práctica me he visto con problemas a la hora de realizar el testing, ya que se me queda colgado tras las pruebas y ello implica que las actions quedan colgadas y no pueden llegar a ejecutarse ni el coveralls ni el SonarCloud. Es por ello que los test del servidor están comentados, para evitar lo ya mencionado.</p>
<p>Sin embargo, es importante mencionar que la aplicación funciona correctamente, ya que he ido haciendo las pruebas a mano y en un principio tanto la conexión como las acciones que se pueden realizar funcionan correctamente.</p>
<a id="md:bibliografía" class="tsd-anchor"></a><h2><a href="#md:bibliografía">Bibliografía</a></h2><ul>
<li><a href="https://campusingenieriaytecnologia2324.ull.es/mod/assign/view.php?id=17360">Enunciado de la modificación</a></li>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/prct09-fiilesystem-magic-app/">Enunciado de la práctica</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-10-sistema-gestor-de-cartas-magic-con-sockets"><span>Práctica 10: <wbr/>Sistema <wbr/>Gestor de <wbr/>Cartas <wbr/>Magic con <wbr/>Sockets</span></a><ul><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:desarrollo"><span>Desarrollo</span></a></li><li><ul><li><a href="#md:ejercicio-1-implementación-de-los-sockets"><span>Ejercicio 1: <wbr/>Implementación de los sockets</span></a></li><li><a href="#md:modificación-1-uso-del-patrón-callback-con-la-api-asíncrona-de-fs"><span>Modificación 1: <wbr/>Uso del patrón <wbr/>Callback con la API asíncrona de fs</span></a></li></ul></li><li><a href="#md:conclusiones"><span>Conclusiones</span></a></li><li><a href="#md:bibliografía"><span>Bibliografía</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>practica09</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><div class="tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div></body></html>